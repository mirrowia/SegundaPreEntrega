<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <div class="container mt-5">
        <!-- Menú desplegable de categorías -->
        <div class="mb-3">
            <label for="categorySelect" class="form-label">Selecciona una categoría:</label>
            <select class="form-select" id="categorySelect" name="category">
                {{#each categories}}
                    <option value="{{this}}">{{this}}</option>
                {{/each}}
            </select>
        </div>

        <!-- Lista de productos -->
        <table class="table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Categoría</th>
                    <th>Stock</th>
                    <th>Precio</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {{#each payload}}
            <tr>
                <td>
                    <a href="/api/products/{{this._doc._id}}">{{this._doc.name}}</a>
                </td>
                <td>{{this._doc.category}}</td>
                <td>{{this._doc.stock}}</td>
                <td>{{this._doc.price}}</td>
                <td><img src="{{this._doc.image_url}}" alt="{{this._doc.name}}" width="100"></td>
                <td>
                    <button class="btn">
                        <i class="bi bi-cart-fill"></i>
                    </button>
                </td>
            </tr>
        {{/each}}
            </tbody>
        </table>

        <!-- Paginación -->
        <nav aria-label="Página">
            <ul class="pagination justify-content-center">
                {{#if hasPrevPage}}
                <li class="page-item">
                    <a class="page-link" href="?page={{prevPage}}">Anterior</a>
                </li>
                {{/if}}
                {{#each pageNumbers}}
                <li class="page-item {{#if current}}active{{/if}}">
                    <a class="page-link" href="?page={{number}}">{{number}}</a>
                </li>
                {{/each}}
                {{#if hasNextPage}}
                <li class="page-item">
                    <a class="page-link" href="?page={{nextPage}}">Siguiente</a>
                </li>
                {{/if}}
            </ul>
        </nav>
    </div>
</body>
</html>
